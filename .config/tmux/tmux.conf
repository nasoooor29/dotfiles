
# Set prefix key to Ctrl + a
unbind C-b
set -g prefix C-a
set -g base-index 1
setw -g pane-base-index 1
set-option -g status-interval 2
bind C-a send-prefix

# Additional settings for better usability
setw -g mode-keys vi            # Enable vi key bindings

set -g mouse on                 # Enable mouse support
set -g status-bg colour235      # Set status bar background color
set -g status-fg white          # Set status bar text color

bind vi-copy '-v' begin-selection     # Begin selection in copy mode.
bind vi-copy '-C-v' rectangle-toggle  # Begin selection in copy mode.
bind vi-copy '-y' copy-selection      # Yank selection in copy mode.

# Use Ctrl + Alt + num to select windows (1-9)
bind -n M-1 select-window -t :1
bind -n M-2 select-window -t :2
bind -n M-3 select-window -t :3
bind -n M-4 select-window -t :4
bind -n M-5 select-window -t :5
bind -n M-6 select-window -t :6
bind -n M-7 select-window -t :7
bind -n M-8 select-window -t :8
bind -n M-9 select-window -t :9

bind -n M-\; copy-mode


bind -n M-\` if-shell -F '#{==:#{session_name},scratch}' { 
    detach-client 
  } { 
    if-shell "tmux has-session -t scratch" {
      display-popup -h 75% -w 90% -E "tmux attach-session -t scratch"
    } {
      display-popup -h 75% -w 90% -E "tmux new-session -d -c '#{pane_current_path}' -s scratch && tmux set-option -t scratch status off && tmux attach-session -t scratch"
    }
}

# bind -n A-S-[ { swap-window -t -1; previous-window } # doesn't work in windows
# bind -n A-S-] { swap-window -t +1; next-window } # doesn't work in windows

bind -n M-n new-window
bind -n M-c kill-window


bind -n M-[ previous-window
bind -n M-] next-window
# set -g wrap-around on


bind r source-file ~/.config/tmux/tmux.conf \; display-message "Config reloaded!"
# Load Tmux Plugin Manager (tpm)
set -g @plugin 'tmux-plugins/tpm'

# Add useful plugins
set -g @plugin 'tmux-plugins/tmux-resurrect'   # Restore tmux sessions
set -g @plugin 'tmux-plugins/tmux-continuum'   # Automatic session saving
set -g @plugin 'tmux-plugins/tmux-sidebar'     # Sidebar for navigation
set -g @plugin 'tmux-plugins/tmux-yank'        # Easy copy/paste
set -g @plugin 'catppuccin/tmux' # See https://github.com/catppuccin/tmux/tags for additional tags
set -g @catppuccin_flavor 'mocha' # latte, frappe, macchiato or mocha
# Make the status line pretty and add some modules
set -g status-right "#{E:@catppuccin_status_application}"
set -agF status-right "#{E:@catppuccin_status_cpu}"
set -ag status-right "#{E:@catppuccin_status_session}"
set -ogq @catppuccin_window_text "  #{pane_current_command}"
set -ogq @catppuccin_window_current_text "  #{pane_current_command}"

# Initialize tpm
run '~/.tmux/plugins/tpm/tpm'
